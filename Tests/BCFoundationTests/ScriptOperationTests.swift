//
//  ScriptOperationTests.swift
//  BCFoundationTests
//
//  Created by Wolf McNally on 9/6/21.
//

import Testing
import BCFoundation
import WolfBase
import Foundation

struct ScriptOperationTests {
    @Test func testInit() {
        let ops: [ScriptOperation] = [.data(Data(hex: "00112233")!), .op(.op_equalverify)]
        #expect(ops† == "[00112233, OP_EQUALVERIFY]")
    }
    
    @Test func testInitFromString() {
        let ops: [ScriptOperation] = [.init("00112233")!, .init("OP_EQUALVERIFY")!]
        #expect(ops† == "[00112233, OP_EQUALVERIFY]")
    }
    
    @Test func testSerialize() {
        #expect(ScriptOperation(Data(repeating: 0, count: 1)).serialized == ‡"0100")
        #expect(ScriptOperation(Data(repeating: 0, count: 2)).serialized == ‡"020000")
        #expect(ScriptOperation(Data(repeating: 0, count: 0x4d)).serialized == ‡"4c4d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
        #expect(ScriptOperation(Data(repeating: 0, count: 0x105)).serialized == ‡"4d0501000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
    }
}
